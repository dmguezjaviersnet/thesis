\chapter{Estado del Arte}\label{chapter:state-of-the-art}

Existen varios artículos científicos que proponen soluciones al problema de identificar cuando hubo una anomalía, algunos proponen métodos
puramente estadísticos y otros utilizan métodos de aprendizaje de máquinas para identificar patrones, mayormente en la serie temporal del
acelerómetro. Entre los varios métodos estadísticos \cite{mednis2011real} propusieron los siguientes:\\

\begin{enumerate}
\item [ \textbf {Z-Thresh} ]: Toma el valor del acelerómetro en el eje Z en un instante determinado y compara su valor modular con 
	un valor \emph{threshold} prefijado, si es mayor devuelve {\it TRUE} indicando que hay una anomalía en ese instante, de lo contrario devuelve {\it FALSE}.\\
	\item [ \textbf {Z-DIFF} ]: Utiliza el valor del acelerómetro en el eje Z en dos instantes de tiempo consecutivos y compara la
		diferencia modular con un valor \emph{threshold} prefijado, si es mayor devuelve {\it TRUE} indicando que hay una anomalía en ese instante, de lo contrario devuelve {\it FALSE}.\\
	\item [ \textbf {STDEV(Z)} ]: Analiza la desviación estándar del valor del acelerómetro en el eje Z durante un intervalo de
		tiempo y compara con un valor \emph{threshold} prefijado, si es mayor devuelve {\it TRUE} indicando que hay una anomalía en ese instante, de lo contrario devuelve {\it FALSE}.\\ 
	\item [ \textbf {G-ZERO} ]: Este método se basa en la idea de que cuando el vehículo interactúa con alguna anomalía, existe un
		instante de tiempo donde las lecturas del acelerómetro en los 3 ejes son cercanas a 0 y menores que cierto valor prefijado, lo que indica que el vehículo está en caída libre.\\
\end{enumerate}

Los 3 primeros métodos requieren información acerca de la orientación del eje Z imaginario del dispositivo encargado de recopilar la información. 
Para caputurar datos preliminares utilizaron un collar LynxNet a una frecuencia de 100Hz. Para la evaluación del sistema utilizaron 4 dispositivos
móviles (Samsung i5700, Samung Galaxy S, HTC Desire, HTC HD2), con los que recolectaron más datos y los procesaron con el objetivo de asignar los 
valores óptimos a cada uno de los \emph{threshold}s característicos de cada uno de los 4 métodos propuestos, así como el tamaño de la ventana en caso de 
\textbf {STDEV(Z)}.\\

\cite{mohan2008nericell} para el diseño de su estrategia (Nericell) se basaron en 2 ideas, cuando un vehículo interactúa con una
anomalía (un bache en este caso) las ruedas descienden en el hueco ocasionando una caída sostenida en la aceleración en el eje Z,
hasta que alcanzan el fondo del bache y en ese momento se produce un pico bien elevado de aceleración en el eje Z. A altas velocidades
ese pico al final del evento es bien prominente, sin embargo cuando se va a muy poca velocidad no se nota prácticamente, pero la caída
sostenida en la aceleración en el eje Z al entrar al bache si se mantiene, por lo que propusieron 2 métodos para detectar una anomalía
dependiendo de la velocidad $v$ a la que se desplaze el vehículo:\\

\begin{enumerate}
	\item [ \textbf {\it v > 25 km/h} ] Utilizan un método idéntico al \textbf {Z-THRESH}, o sea, buscan un valor bien prominente de
		aceleración en un instante de tiempo determinado, que sea mayor que cierto \emph{threshold} prefijado.\\
	\item [ \textbf {\it v < 25 km/h} ] Utilizan un método que llamaron \textbf {Z-SUS} que busca una caída sostenida en la aceleración
		en el eje Z, por debajo de un cierto \emph{threshold} prefijado, durante cierta cantidad de tiempo.\\
\end{enumerate}

Con respecto a los trabajos existentes que utilizan el aprendizaje de máquinas existen varios, \cite{carlos2018evaluation} donde además de realizar 
una comparación de los métodos existentes en su momento, crearon un método en el que utilizaron un enfoque supervisado con \textbf{SVM} para entrenar 
un modelo que decidiera utilizando varios \emph{features} (basados principalmente en la aceleración en el eje Z), sí existía o no una anomalía. \emph{features}
como la media, desviación estándar, varianza, coeficiente de variaciónn y diferencia entre valor mínimo y máximo. Otros 4 \emph{features} utilizados para
otorgar un valor de confianza a 4 de los \emph{features} previamente mencionados excepto a la varianza, comparándolos con un cierto valor \emph{threshold}. Esta idea
fue tomada teniendo en cuenta una serie de artículos con respecto al tema, \cite{mednis2011real}, con el objetivo de mejorar el rendimiento
del clasificador. Otro de los \emph{features} es la cantidad de veces que un feature estadístico sobrepasó el valor \emph{threshold} concebido. Completan los 12 \emph{features}
utilizados la suma de los valores de confianza, así como el valor de confianza correspondiente. Cabe desctacar que implementaron una plataforma llamada 
Pothole Lab con el objetivo de crear un sitio web público donde tener acceso a data sets robustos y curados. Los datos que utilizaron fueron obtenidos de este
mismo sitio y fueron capturados utilizando un Moto G Android a una frecuencia de 50Hz.\\

\cite{el2018towards} como en el artículo previamente mencionado, llevaron a cabo un extenso proceso, separando las señales de los sensores por
ventanas de 1 segundo y generando vectores de \emph{features} bien extensos en cada una de estas ventanas. Además llevaron a cabo un proceso de eliminación de ruido
de las señales probando varios métodos conocidos en el campo del procesamiento de señales digitales como la transformada de Fourier o la transformada de
Fourier por ventanas discretas (WDFT por sus siglas en inglés), pero finalmente utilizaron transformadas de wavelets para purificar la señales y obtener
datos más confiables con los que llevar a cabo el proceso de entrenamiento del modelo de Machine Learning. Se decantaron por un enfoque supervisado, por lo que 
etiquetaron de antemano los datos utilizando vídeos capturados durante el mismo proceso de recolección de datos, métodos como \textbf{KNN},
\emph{\textbf{Decision Trees}}, \textbf{SVM} y \emph{ensembles} de clasificadores fueron probados, obteniendo los mejores resultados con las \textbf{SVM} y los
\emph{bagged decission trees}. Utilizaron \emph{features} estadísticos, de dominio temporal, de dominio de frecuencia y de dominio frecuencia-temporal. Entre los \emph{features}
que utilizaron están media, mediana, moda, desviación estándar, varianza, rango entre cuartiles, media de la frecuencia, la mediana de la frecuencia, etc.\\

\cite{seraj2015roads} en su propuesta, incorporaron además los datos del giroscopio con el objetivo de obtener más \emph{features} que permitieran mejorar la calidad
del clasificador. Además, también realizaron un proceso para eliminar el ruido y mejorar la calidad de las señales obtenidas con los sensores de los dispositivos
utilizados para capturar los datos. Separaron las señales en ventanas de 2.5 segundos y extrajeron de ahí varios \emph{features} para el proceso de entrenamiento. \emph{features}
de dominio temporal, \emph{features} de dominio de frecuencia y \emph{features} extraídos de la transformada de wavelet son los que conforman los vectores. Finalmente entrenaron
un modelo utilizando una \textbf{SVM} con los \emph{features} que extrajeron de los datos, razón por la cual etiquetaron sus datos utilizando vídeos y audios grabados durante la
recolección de los datos. El dispositivo que utilizaron para la recolección de los datos fue un Samsung Galaxy S2 y recopilaron datos a frecuencias de 47Hz y 93Hz.\\

% //\\// Pendiente //\\//
% - Añadir detalles sobre el uso del GPS.
% - Añadir detalles sobre el uso de vehículos distintos.
% - Añadir detalles sobre la ubicación de los dispositivos en el vehiculo.

El algoritmo para la detección de anomalías en la carretera propuesto por \cite{eriksson2008pothole} se basa en que condiciones anómalas de la carretera
son reflejadas en características de los datos de aceleración. El problema para identificar baches a partir de lecturas del acelerómetro es bastante 
complelejo debido a la amplia variación en las condiciones de la carretera y el comportamiento del conductor. La mayoría de las anomalías pueden ser 
caracterizadas como eventos de alta energía en la señal de la aceleración, por si sola la energía de la señal no es suficiente como un criterio de 
detección debido a que muchos eventos de alta energía pueden no considerarse anomalías en la carretera. Muchos accesorios de la carretera como 
los cruces de trenes, las juntas de expansión, los eventos de alta energía que pueden ser causados por los pasajeros cuando le dan un fuerte 
tirón a la puerta del vehículo o si el el conductor frena de manera repentina. Los datos recopilados son divididos en 256 ventanas pues 
los eventos que interesan son generalmente eventos de corta duración. Una serie de filtros de procesamientos de señales son aplicados 
al  pedazo continuo de ventanas, donde cada filtro está diseñado para rechazar uno o más de un evento que no sea bache. 
Las etapas de filtrado se dividen en 5 y son las siguientes:

\begin{enumerate}
	\item [ \textbf {Velocidad} ]: Las ventanas donde el carro no se está moviendo o se está moviendo a muy poca velocidad son ignoradas. 
		De esta forma se rechazan eventos como un tirón en la puerta cuando se baja el pasajero del vehículo.\\
	\item [ \textbf {\emph{high-pass}} ] Los filtros de \emph{high-pass} eliminan las componentes de baja frecuencia de la señal de aceleración en los ejes z y x, 
		que pueden indicar giros, frenazos, etc.\\
	\item  [ \textbf {Z-peak} ] Los picos de aceleración en el eje z es la principal característica de las anomalías significativsas de la carretera.
		Este filtro rechaza todas las ventanas con un pico (absoluto) en la aceleración menor que un threshold $t_z$.\\
	\item  [ \textbf {xz-ratio } ] La aceleración en el eje x puede ayudar a identificar anomalías que abarcan el ancho de la carretera y por lo tanto 
		impactan ambos lados del carro de igual manera.  Asumiendo que el bache solo impacta un lado del carro, un verdadero evento de bache con un
		un gran pico de aceleración en el eje z debería producir un pico significante en el eje x dentro de alguna ventana.\\
	\item  [ \textbf {speed vs ratio } ] A altas velocidades, incluso pequeñas anomalías en la carretera pueden crear altos picos en las lecturas 
		de aceleración. Este filtro rechaza ventanas donde el pico de aceleración en el eje z es menor que un factor $t_s$ veces la velocidad a la que 
		va el vehículo.\\
\end{enumerate}

Dado que la frecuencia de captura de la señal del acelerómetro se hace mucho más seguido que la del GPS, proponen estimar la localización del vehículo
cuando ocurra la lectura $l_i$ del acelerómetro usando interpolación lineal entre lecturas de GPS. A pesar que ciertos tipos de anomalías pueden producir
alta energía, no siempre que se produzca esto representa una carretera en mal estado. Los cruces de ferrocarriles, reductores de velocidad y otros
equipamientos bien conocidos embebidos en la carretera pueden producir una alta energía y no se consideran anomalías de la carretera. Para esto proponen
tener una lista negra con los localizaciones de las anomalías que caigan en alguno de estos equipamientos embebidos en la carretera cuya información se
puede obtener de y luego remover los mismos. Debido a que el error en la medición del GPS (alrededor de 5m a la redonda como media) es significativamente
mayor que el tamaño de un bache común, la ausencia de una detección en una localización particular no siempre es un indicativo de que no haya anomalías en
esta []. No es posible determinar puramente por la localización del GPS en el momento en que las ruedas del vehículo hacen contacto con alguna anomalía de
la carretera. Los conductores usuales intentan evitar los baches, por que la probabilidad de detectar una anomalía en la carretera es menor que la que se
debe de esperar de una distribución sin sesgo del área que se intenta mapear.\\

Fengyu Cong {\it et al.} [] para la extracción de \emph{features} descomponen la señal usando \textbf{WPD}(\emph{Wavelet Packet Decomposition}) usando
sucesivamente filtros de \emph{low-pass} y de \emph{high-pass}. Done WPD es llevado a cabo una aplicación iterativa de filtros espejos en cuadratura y seguido por
submuestreo. La selección de \emph{features} basada en machine learning puede ser asistida para reducir la demanda computacional para la clasificiación.
La selección de \emph{features} está diseñada para encontrar los \emph{features} que hacen una mejor discriminación de los baches y los segmentos
normales en estudio. Para la selección de \emph{features} se probaron con cuatro métodos: \textbf{Backward Selection}, \textbf{Forward Selection},
\textbf{Genetic Algorithm} y \textbf{PCA} usando un número diferente de \emph{features} seleccionados. \textbf{PCA} fue el que mejores resutados arrojó
cuando el número de \emph{features} es mayor que 5, mientras \textbf{FS}(\emph{Forward Selection}) es mejor cuando el número de \emph{features} es mayor
que 2 y menor que 6. \\
Para la clasificicación usaron \textbf{SVM} one-class classification con kernel RBF con parámetros  $\nu = 0.01$  $\gamma = 0.00002$. \textbf{SVM} fué
entrenado con el 70\%  de los datos (1234 segmentos) y el conjunto de entrenamiento fue escogido de manera aleatoria. El resto de los datos  (530 segmentos)
y en todos los 21 segmentos de anomalías fueron usados para los tests de precisión del modelo \textbf{SVM} construido. 

\cite{zheng2020fused} se refieren a que la mayoría de los artículos con respecto al tema no toman en consideración el hecho que la gran mayoría de la
carretera está en el mundo no posee anomalías, y que la aplicación de técnicas de Machine Learning utizando una ventana deslizante a ciegas puede
disminuir considerablemente la precisión y la rapidez del proceso de entrenamiento. Para esto plantean que una anomalía comienza con una señal normal
y luego ocurre un pico de aceleración en el eje Z que excede un \emph{threshold} superior y luego cae y excede un \emph{threshold} inferior o viceversa,
y finalmente la señal vuelve a estabilizarse entre esos dos \emph{threshold}s. Ese intervalo es el que consideran como el intervalo candidato en el que
puede haber una anomalía , y para encontrarlo utilizan primero el método heurístico de establecer un \emph{threshold} superior e inferior en la aceleración
y buscan el primer instante donde la aceleración sobrepasa alguno de los \emph{threshold}s y el último instante, y utilizan un método para encontrar los
instantes de tiempo justo antes de que ocurriera el primer evento y el instante de tiempo justo después de que ocurriera el último evento, de esta forma
logran construir una ventana de tamaño dinámico que contiene toda la información acerca de la anomalía, de esta forma construyen un conjunto de ventanas
con posibles anomalías en la serie temporal. Luego crean un modelo con un random forest utilizando algunos \emph{features} estadísticos de cada una de las ventanas
para filtrar ventanas que no constituyen anomalías reales, también proponen tratar al vehículo como un modelo de vibración de un nivel de libertad para lo
cual diseñan varios experimentos. Como resultado de esto llegaron a la conclusión de que la varianza de la aceleración en el eje Z cuando el vehículo interactúa
con una anomalía tendrá una relación casi lineal con la profundidad o altura de la anomalía. Utilizando \textbf{KNN} y \textbf{DTW}(\emph{Dynamic Time Warping}
que se utiliza para determinar similitud entre 2 series temporales que puedan ser obtenidas a distintas velocidades), es que llevan a cabo el proceso
de identificar los tipos de anomalías. Los autores comparan su propuesta con otras hechas en los últimos 3 años obteniendo un mejor \emph{F1 score} al
identifar los 3 tipos de anomalías que consideraron en cada uno de los 3 \emph{data sets} que probaron.
